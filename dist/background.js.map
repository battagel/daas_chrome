{"version":3,"file":"background.js","mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://daas_chrome/./src/background.ts"],"sourcesContent":["\"use strict\";\n// To add a site to Antonium do the following:\n// 1. Add a rule (background.js)\n// 2. Add the site to the active_sites list (backgorund.js)\n// 3. Add host_permissions for site (manifest.json)\nchrome.runtime.onInstalled.addListener(() => {\n    console.log(\"Installed\");\n    chrome.action.disable();\n    chrome.declarativeContent.onPageChanged.removeRules(undefined, () => {\n        let stackoverflowRule = {\n            conditions: [\n                new chrome.declarativeContent.PageStateMatcher({\n                    pageUrl: { hostSuffix: 'stackoverflow.com' },\n                }),\n            ],\n            actions: [\n                new chrome.declarativeContent.ShowAction(),\n            ],\n        };\n        let confluenceRule = {\n            conditions: [\n                new chrome.declarativeContent.PageStateMatcher({\n                    pageUrl: { hostSuffix: 'confluence.eng.nimblestorage.com' },\n                }),\n            ],\n            actions: [\n                new chrome.declarativeContent.ShowAction(),\n            ],\n        };\n        let rndwikiRule = {\n            conditions: [\n                new chrome.declarativeContent.PageStateMatcher({\n                    pageUrl: { hostSuffix: 'rndwiki-pro.its.hpecorp.net' },\n                }),\n            ],\n            actions: [\n                new chrome.declarativeContent.ShowAction(),\n            ],\n        };\n        let rules = [stackoverflowRule, confluenceRule, rndwikiRule];\n        chrome.declarativeContent.onPageChanged.addRules(rules);\n    });\n});\nchrome.tabs.onUpdated.addListener(function (_, changeInfo, tab) {\n    console.log(\"Updated\");\n    console.log(changeInfo);\n    let active_sites = [\n        \"stackoverflow.com/questions/\",\n        \"confluence.eng.nimblestorage.com/viewpage\",\n        \"confluence.eng.nimblestorage.com/display\",\n        \"rndwiki-pro.its.hpecorp.net/pages/viewpage\",\n        \"rndwiki-pro.its.hpecorp.net/display\"\n    ];\n    if (changeInfo.status == \"complete\" && tab.id !== undefined && tab.url != undefined) {\n        let found = false;\n        for (var i = 0; i < active_sites.length; i++) {\n            if (tab.url.includes(active_sites[i])) {\n                found = true;\n                break;\n            }\n        }\n        if (found) {\n            console.log(\"Antonium compatible site found\");\n            chrome.scripting.executeScript({\n                files: [\"contentscript.js\"],\n                target: { tabId: tab.id },\n            });\n        }\n        else {\n            console.log(\"URL incompatible with Antonium\");\n        }\n    }\n    else {\n        console.warn(\"Incorrect onUpdated message\");\n    }\n});\n"],"names":[],"sourceRoot":""}